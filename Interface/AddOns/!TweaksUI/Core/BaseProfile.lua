-- TweaksUI Base Profile
-- Default profile applied on first run (1.7.2+)
-- Contains sensible defaults with modules enabled and visibility controls configured

local ADDON_NAME, TweaksUI = ...

TweaksUI.BaseProfile = {}
local BaseProfile = TweaksUI.BaseProfile

-- ============================================================================
-- BASE PROFILE DATA
-- ============================================================================

-- This is the raw (uncompressed) TweaksUI profile that will be applied on first install
-- Use /tui exportraw to generate this string from your current settings
-- Format: TUIRAW:{json data}
local BASE_PROFILE_STRING = [==[TUIRAW:{"modules":{"resourceBars":{"enabled":true,"stagger":{"textFormat":"percent","customColor":[0.52,1,0.52,1],"lightColor":[0.52,1,0.52,1],"useDynamicColor":true,"heavyColor":[1,0.35,0.35,1],"moderateColor":[1,0.85,0.35,1]},"global":{"scale":1.2,"hideBlizzardBars":true},"soulFragments":{"countFontSize":22,"visibilityEnabled":true,"scale":0.3,"labelFontSize":10,"positionY":469.09967041016,"fadeAlpha":0.3,"anchor":"BOTTOMLEFT","fadeDelay":3,"labelColor":[0.7,0.5,0.8,0.8],"showInParty":true,"enabled":true,"showSolo":false,"showInRaid":true,"countColor":[1,1,1,1],"showInInstance":true,"fadeEnabled":false,"showInCombat":true,"countFontOutline":"OUTLINE","positionX":1137.4329833984,"countOffsetY":-5,"style":"fel","showNoTarget":false,"labelFontOutline":"OUTLINE","showHasTarget":true,"showOutOfCombat":false,"showLabel":false},"animations":{"fillSpeed":0.15,"smoothFill":true,"glowAtMax":true,"glowColor":[1,1,0.5,0.8],"enableGlow":true},"classPower":{"showSolo":false,"usePerPointColors":false,"textFontOutline":"OUTLINE","textOffsetX":0,"fadeAlpha":0.3,"borderColor":[0,0,0,1],"anchor":"BOTTOMLEFT","backgroundColor":[0.15,0.15,0.15,0.8],"showInParty":true,"enabled":false,"textFormat":"current","inactiveColor":[0.2,0.2,0.2,0.6],"showInInstance":true,"fadeOutOfCombat":true,"showInCombat":true,"showInRaid":true,"textFontSize":12,"positionX":911.66668701172,"fadeEnabled":false,"height":12,"visibility":"has_resource","useResourceColor":false,"customColor":[1,0.8,0,1],"borderSize":1,"spacing":4,"showBorder":true,"fadeDelay":3,"textAnchor":"CENTER","showNoTarget":false,"textOffsetY":0,"perPointColors":[[0.3,1,0.3,1],[0.5,1,0.3,1],[0.7,1,0.2,1],[0.9,0.9,0.1,1],[1,0.6,0,1],[1,0.3,0,1],[1,0,0,1]],"showText":false,"width":225,"showOutOfCombat":false,"displayStyle":"pointed","positionY":372.80014038086,"hideAtZero":true,"visibilityEnabled":true,"showHasTarget":true,"useClassColor":true,"textColor":[1,1,1,1]},"powerBar":{"showSolo":false,"visibilityEnabled":true,"textFontOutline":"OUTLINE","textOffsetX":0,"positionY":450.39999389648,"borderColor":[0,0,0,1],"anchor":"BOTTOMLEFT","backgroundColor":[0.1,0.1,0.1,0.8],"showInParty":true,"enabled":true,"textAnchor":"CENTER","showInInstance":true,"fadeOutOfCombat":false,"showInCombat":true,"showInRaid":true,"textFontSize":11,"font":"Friz Quadrata TT","positionX":960.99987792969,"fadeEnabled":false,"height":16,"visibility":"always","useResourceColor":true,"customColor":[0,0.8,0,1],"borderSize":1,"showBorder":false,"fadeDelay":3,"texture":"Interface\\TargetingFrame\\UI-StatusBar","showNoTarget":false,"width":190,"textOffsetY":0,"textFormat":"current","showText":true,"showOutOfCombat":false,"fadeAlpha":0.5,"showHasTarget":true,"useClassColor":false,"textColor":[1,1,1,1]},"runes":{"cooldownFontSize":10,"sortByRecharge":true,"cooldownFontOutline":"OUTLINE","showCooldownText":true}},"general":{"minimapSettings":{"customPosition":{"y":725.07696533203,"relPoint":"BOTTOMLEFT","point":"BOTTOMLEFT","x":1443.0258789062},"showCoords":true,"decorationPositions":{"MinimapCluster.ZoneTextButton":{"y":209.31045532227,"relPoint":"BOTTOMRIGHT","point":"BOTTOMRIGHT","x":-27.856664657593},"MinimapCluster.IndicatorFrame.CraftingOrderFrame":{"y":-109.99827957153,"relPoint":"CENTER","point":"CENTER","x":-89.689575195312},"MinimapCluster.InstanceDifficulty":{"y":81.821403503418,"relPoint":"CENTER","point":"CENTER","x":84.345336914062},"GameTimeFrame":{"y":-111.64017772675,"relPoint":"CENTER","point":"CENTER","x":91.120361328125},"TweaksUI_MinimapCoords":{"y":-111.94821166992,"relPoint":"CENTER","point":"CENTER","x":-4.3306884765625},"TimeManagerClockButton":{"y":-111.61386489868,"relPoint":"CENTER","point":"CENTER","x":65.384521484375}},"customBorder":{"color":{"b":0.019607843831182,"g":0.019607843831182,"r":0.019607843831182},"width":1},"hide":{"zoomButtons":true,"calendar":false,"border":false,"craftingOrder":false,"addonCompartment":true,"zoneTextBackground":true,"expansionButton":true,"clock":false,"mail":false,"instanceDifficulty":false,"tracking":false,"zoneText":true},"squareShape":true,"showZoneText":true,"buttonCollector":{"drawerPosition":"left","enabled":true},"scale":1.3,"useCustomFrame":true},"autoRepair":true,"minimap":{"minimapPos":225.63319673171},"afkFadeAnimation":true,"mediaSettings":{"globalFont":"2002","globalFontOutline":"","globalTexture":"TweaksUI Hard Bevel","useGlobalTexture":true,"useGlobalIconEdgeStyle":false,"globalIconEdgeStyle":"sharp","useGlobalFont":true},"afkFadeDuration":0.5,"afkModeEnabled":true,"hideBlizzardDebuffs":false,"afkCameraSpinSpeed":0.05,"afkHideNameplates":true,"autoRepairGuild":true,"hideBlizzardBuffs":false,"characterPanelEnabled":false,"afkKeepChat":false,"afkCameraSpin":true,"autoSellJunk":true,"afkKeepMinimap":false,"visibility":{"durability":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"debuffs":{"visibilityEnabled":false,"solo":true,"noTarget":false,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":false,"inCombat":true},"orderHall":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"statusBars":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"extraAction":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"vehicleSeat":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"errorText":{"visibilityEnabled":true,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":true,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"minimap":{"visibilityEnabled":false,"solo":false,"noTarget":false,"inParty":false,"hide":false,"hasTarget":false,"inInstance":false,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":false,"fadeDelay":3,"outOfCombat":false,"inCombat":false},"alerts":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"menuBar":{"visibilityEnabled":false,"solo":false,"noTarget":false,"inParty":false,"hide":false,"hasTarget":false,"inInstance":false,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":false,"fadeDelay":1,"outOfCombat":false,"inCombat":false},"bagsBar":{"visibilityEnabled":false,"solo":false,"noTarget":false,"inParty":false,"hide":false,"hasTarget":false,"inInstance":false,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":false,"fadeDelay":10,"outOfCombat":false,"inCombat":false},"questTracker":{"visibilityEnabled":false,"solo":false,"noTarget":false,"inParty":false,"hide":false,"hasTarget":false,"inInstance":false,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":false,"fadeDelay":3,"outOfCombat":false,"inCombat":false},"talkingHead":{"visibilityEnabled":true,"solo":false,"noTarget":false,"inParty":false,"hide":false,"hasTarget":false,"inInstance":false,"fadeAlpha":0.5,"onMouseover":true,"fadeEnabled":false,"inRaid":false,"fadeDelay":3,"outOfCombat":false,"inCombat":false},"buffs":{"visibilityEnabled":true,"solo":false,"noTarget":false,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":false,"inCombat":true},"tutorials":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true},"zoneText":{"visibilityEnabled":false,"solo":true,"noTarget":true,"inParty":true,"hide":false,"hasTarget":true,"inInstance":true,"fadeAlpha":0.5,"onMouseover":false,"fadeEnabled":false,"inRaid":true,"fadeDelay":3,"outOfCombat":true,"inCombat":true}},"hideMinimapButton":false},"actionBars":{"enabled":true,"bars":{"ActionBar8":{"showSolo":true,"visibilityEnabled":false,"showInVehicle":true,"cooldownNumbersEnabled":true,"showMounted":true,"showInParty":true,"useMasque":false,"showDragonriding":true,"showWithTarget":true,"showInInstance":true,"showInCombat":true,"buttonsShown":12,"verticalSpacing":2,"barAlpha":1,"horizontalSpacing":2,"countAlpha":1,"macroNameAlpha":1,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":1,"showInRaid":true,"columns":12,"buttonSize":36,"enabled":false,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":true,"orientation":"horizontal","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar7":{"showSolo":true,"visibilityEnabled":false,"showInVehicle":true,"cooldownNumbersEnabled":true,"showMounted":true,"showInParty":true,"useMasque":false,"showDragonriding":true,"showWithTarget":true,"showInInstance":true,"showInCombat":true,"buttonsShown":12,"verticalSpacing":2,"barAlpha":1,"horizontalSpacing":2,"countAlpha":1,"macroNameAlpha":1,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":1,"showInRaid":true,"columns":12,"buttonSize":36,"enabled":false,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":true,"orientation":"horizontal","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar5":{"showSolo":false,"visibilityEnabled":false,"showInVehicle":false,"cooldownNumbersEnabled":true,"showMounted":false,"showInParty":false,"useMasque":false,"showDragonriding":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"buttonsShown":12,"verticalSpacing":0,"barAlpha":1,"horizontalSpacing":0,"countAlpha":0,"macroNameAlpha":0,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":0,"showInRaid":false,"columns":6,"buttonSize":38,"enabled":true,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":false,"orientation":"horizontal","buttonAlpha":1,"buttonFrameAlpha":0,"showOnMouseover":false},"ActionBar1":{"showSolo":false,"visibilityEnabled":false,"showInVehicle":false,"cooldownNumbersEnabled":true,"showMounted":false,"showInParty":false,"useMasque":false,"showDragonriding":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"buttonsShown":12,"verticalSpacing":0,"barAlpha":1,"horizontalSpacing":0,"countAlpha":1,"macroNameAlpha":0.45,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":0,"showInRaid":false,"columns":12,"buttonSize":38,"enabled":true,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":0,"iconEdgeStyle":"default","showOutOfCombat":false,"orientation":"horizontal","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar3":{"showSolo":false,"visibilityEnabled":false,"showInVehicle":false,"cooldownNumbersEnabled":true,"showMounted":false,"showInParty":false,"useMasque":false,"showDragonriding":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"buttonsShown":12,"verticalSpacing":0,"barAlpha":1,"horizontalSpacing":0,"countAlpha":0,"macroNameAlpha":0,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":0,"showInRaid":false,"columns":1,"buttonSize":35,"enabled":true,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":false,"orientation":"vertical","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar2":{"showSolo":false,"visibilityEnabled":false,"showInVehicle":false,"cooldownNumbersEnabled":true,"showMounted":false,"showInParty":false,"useMasque":false,"showDragonriding":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"buttonsShown":12,"verticalSpacing":0,"barAlpha":1,"horizontalSpacing":0,"countAlpha":0,"macroNameAlpha":0,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":0,"showInRaid":false,"columns":12,"buttonSize":38,"enabled":true,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":false,"orientation":"vertical","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar4":{"showSolo":false,"visibilityEnabled":false,"showInVehicle":false,"cooldownNumbersEnabled":true,"showMounted":false,"showInParty":false,"useMasque":false,"showDragonriding":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"buttonsShown":12,"verticalSpacing":0,"barAlpha":1,"horizontalSpacing":0,"countAlpha":1,"macroNameAlpha":0,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":0,"showInRaid":false,"columns":1,"buttonSize":35,"enabled":true,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":false,"orientation":"vertical","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false},"ActionBar6":{"showSolo":true,"visibilityEnabled":false,"showInVehicle":true,"cooldownNumbersEnabled":true,"showMounted":true,"showInParty":true,"useMasque":false,"showDragonriding":true,"showWithTarget":true,"showInInstance":true,"showInCombat":true,"buttonsShown":12,"verticalSpacing":2,"barAlpha":1,"horizontalSpacing":2,"countAlpha":1,"macroNameAlpha":1,"rangeIndicatorEnabled":true,"rangeIndicatorColor":[1,0.1,0.1,0.4],"keybindAlpha":1,"showInRaid":true,"columns":12,"buttonSize":36,"enabled":false,"cooldownSwipeAlpha":0.6,"alpha":1,"hideGryphons":false,"iconZoom":0.08,"pageArrowsAlpha":1,"iconEdgeStyle":"default","showOutOfCombat":true,"orientation":"horizontal","buttonAlpha":1,"buttonFrameAlpha":1,"showOnMouseover":false}},"systemBars":{"BagsBar":{"showSolo":false,"visibilityEnabled":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"showInRaid":false,"enabled":true,"showOutOfCombat":false,"showOnMouseover":true,"showMounted":false,"barAlpha":1,"showInParty":false},"StanceBar":{"showSolo":true,"visibilityEnabled":false,"showWithTarget":true,"showInInstance":true,"showInCombat":true,"showInRaid":true,"enabled":true,"showOutOfCombat":true,"showOnMouseover":false,"showMounted":true,"barAlpha":1,"showInParty":true},"PetBar":{"showSolo":true,"visibilityEnabled":false,"showWithTarget":true,"showInInstance":true,"showInCombat":true,"showInRaid":true,"enabled":true,"showOutOfCombat":true,"showOnMouseover":false,"showMounted":true,"barAlpha":1,"showInParty":true},"MicroMenu":{"showSolo":false,"visibilityEnabled":false,"showWithTarget":false,"showInInstance":false,"showInCombat":false,"showInRaid":false,"enabled":true,"showOutOfCombat":false,"showOnMouseover":true,"showMounted":false,"barAlpha":1,"showInParty":false}},"stanceBar":{"showSolo":true,"visibilityEnabled":false,"spacing":2,"hideBlizzard":true,"useMasque":false,"showWithTarget":false,"buttonSize":36,"showInInstance":true,"showInParty":true,"showOnMouseover":false,"showInRaid":true,"showInCombat":true,"columns":10,"iconEdgeStyle":"default","showOutOfCombat":true,"orientation":"horizontal","enabled":true,"barAlpha":1,"iconZoom":0}},"layout":{"snapping":{"enabled":true,"tolerance":15,"showIndicator":true},"dataVersion":4,"elements":{"debuffs":{"y":856.66674804688,"x":330.0002746582,"point":"BOTTOMLEFT","scale":1},"container_tank":{"y":631.66668701172,"x":1648.3323974609,"point":"BOTTOMLEFT","scale":1},"resourcebar_debuffs":{"y":204.16723632812,"x":965.00018310547,"point":"BOTTOMLEFT","scale":1},"unitframe_focus":{"y":517.85925292969,"x":679.27301025391,"point":"BOTTOMLEFT","scale":0.95000004768372},"castbar_target":{"y":629.00012207031,"x":941.66687011719,"point":"BOTTOMLEFT","scale":1},"CustomTracker_TUIWrapper":{"y":354,"x":966.66687011719,"point":"BOTTOMLEFT","scale":1},"EssentialCooldownViewer_TUIWrapper":{"y":451,"x":940.66687011719,"point":"BOTTOMLEFT","scale":1},"systembar_stancebar":{"y":100,"x":5.0000009536743,"point":"BOTTOMLEFT","scale":1},"resourcebar_classPower":{"y":1113.1668701172,"x":672.50067138672,"point":"BOTTOMLEFT","scale":1},"UtilityCooldownViewer_TUIWrapper":{"y":408.75006103516,"x":940.66668701172,"point":"BOTTOMLEFT","scale":1},"objectiveTracker":{"y":294.50054931641,"x":1873.3332519531,"point":"BOTTOMLEFT","scale":1},"actionbar_5":{"y":722.83319091797,"x":0,"point":"BOTTOMLEFT","scale":1},"unitframe_target":{"y":448.71353149414,"x":1196.0183105469,"point":"BOTTOMLEFT","scale":1},"container_raid_large":{"y":79.297546386719,"x":1606.2222900391,"point":"BOTTOMLEFT","scale":0.89999997615814},"unitframe_pet":{"y":373.97079467773,"x":612.39782714844,"point":"BOTTOMLEFT","scale":1.0499999523163},"resourcebar_buffs":{"y":991.66717529297,"x":415.00009155273,"point":"BOTTOMLEFT","scale":1},"minimap":{"y":725.07696533203,"x":1443.0258789062,"point":"BOTTOMLEFT","scale":1.2999999523163},"unitframe_targettarget":{"y":443.57553100586,"x":1393.7862548828,"point":"BOTTOMLEFT","scale":0.95000004768372},"unitframe_player":{"y":449.76260375977,"x":719.29388427734,"point":"BOTTOMLEFT","scale":1},"castbar_player":{"y":424.16708374023,"x":718.83367919922,"point":"BOTTOMLEFT","scale":1},"container_boss":{"y":647.83331298828,"x":1028.8331298828,"point":"BOTTOMLEFT","scale":1},"container_raid_small":{"y":808.85723876953,"x":0,"point":"BOTTOMLEFT","scale":1.0499999523163},"actionbar_4":{"y":236.66696166992,"x":0,"point":"BOTTOMLEFT","scale":1},"resourcebar_powerBar":{"y":488,"x":941.66687011719,"point":"BOTTOMLEFT","scale":1},"resourcebar_healthBar":{"y":783.99969482422,"x":617.50073242188,"point":"BOTTOMLEFT","scale":1},"castbar_focus":{"y":632.83264160156,"x":184.66806030273,"point":"BOTTOMLEFT","scale":1},"actionbar_3":{"y":236.66696166992,"x":35.666381835938,"point":"BOTTOMLEFT","scale":1},"xp_rep_bars":{"y":0,"x":782.99987792969,"point":"BOTTOMLEFT","scale":1},"BuffIconCooldownViewer_TUIWrapper":{"y":507,"x":1012.6668701172,"point":"BOTTOMLEFT","scale":1},"chat":{"y":0,"x":0,"point":"BOTTOMLEFT","scale":1},"actionbar_1":{"y":19.000019073486,"x":838.66668701172,"point":"BOTTOMLEFT","scale":1},"buffs":{"y":1110,"x":1478.3333740234,"point":"BOTTOMLEFT","scale":1},"systembar_petbar":{"y":95.33390045166,"x":977.33325195312,"point":"BOTTOMLEFT","scale":1},"systembar_bagsbar":{"y":55.833145141602,"x":1925.3337402344,"point":"BOTTOMLEFT","scale":1},"container_party":{"y":0,"x":311.94470214844,"point":"BOTTOMLEFT","scale":1.5},"stanceBar":{"y":94.001304626465,"x":839.49951171875,"point":"BOTTOMLEFT","scale":1},"systembar_micromenu":{"y":5.0000047683716,"x":1744.3331298828,"point":"BOTTOMLEFT","scale":1},"actionbar_2":{"y":56.000015258789,"x":838.66674804688,"point":"BOTTOMLEFT","scale":1}},"attachments":{"actionbar_4":{"point":"TOPRIGHT","widthOffset":0,"widthMode":"stretch","matchWidth":false,"parentId":"actionbar_3","absoluteX":0,"relPoint":"TOPLEFT","offsetX":-35.666381835938,"heightMode":"stretch","matchHeight":false,"offsetY":-1.52587890625e-05,"heightOffset":0,"absoluteY":236.66696166992},"unitframe_pet":{"point":"TOPRIGHT","widthOffset":0,"widthMode":"stretch","matchWidth":false,"parentId":"castbar_player","absoluteX":612.39782714844,"relPoint":"BOTTOM","offsetX":3.0321693621731,"heightMode":"stretch","matchHeight":false,"offsetY":-1.9979669526062,"heightOffset":0,"absoluteY":373.97079467773},"castbar_player":{"point":"TOPRIGHT","widthOffset":0,"widthMode":"stretch","matchWidth":true,"parentId":"unitframe_player","matchHeight":false,"savedWidth":220.00019836426,"relPoint":"BOTTOMRIGHT","offsetX":-0.46026611328125,"heightMode":"stretch","heightOffset":0,"offsetY":-25.595489501953,"absoluteY":424.16708374023,"absoluteX":718.83367919922},"stanceBar":{"point":"BOTTOMLEFT","widthOffset":0,"widthMode":"stretch","matchWidth":false,"parentId":"actionbar_2","absoluteX":839.49951171875,"relPoint":"TOPLEFT","offsetX":0.832763671875,"heightMode":"stretch","matchHeight":false,"offsetY":38.001289367676,"heightOffset":0,"absoluteY":94.001304626465},"systembar_petbar":{"point":"BOTTOMRIGHT","widthOffset":0,"widthMode":"stretch","matchWidth":false,"parentId":"actionbar_2","absoluteX":977.33325195312,"relPoint":"TOPRIGHT","offsetX":138.66650390625,"heightMode":"stretch","matchHeight":false,"offsetY":39.333892822266,"heightOffset":0,"absoluteY":95.33390045166},"actionbar_2":{"point":"BOTTOMRIGHT","widthOffset":0,"widthMode":"stretch","matchWidth":false,"parentId":"actionbar_1","absoluteX":838.66674804688,"relPoint":"TOPRIGHT","offsetX":6.103515625e-05,"heightMode":"stretch","matchHeight":false,"offsetY":36.999996185303,"heightOffset":0,"absoluteY":56.000015258789}},"grid":{"enabled":true,"showLines":true,"snapToGrid":false,"size":32}},"castBars":{"target":{"showTimer":true,"iconPosition":"LEFT","timerPosition":"RIGHT","castingColor":[1,0.7,0,1],"showSpark":true,"iconSize":24,"channelingColor":[0,1,0,1],"borderSize":1,"showIcon":true,"borderColor":[0,0,0,1],"anchor":"BOTTOMLEFT","showBorder":true,"backgroundColor":[0.1,0.1,0.1,0.8],"hideBlizzard":true,"enabled":true,"height":24,"nonInterruptibleColor":[0.7,0.7,0.7,1],"spellNameFontSize":12,"spellNamePosition":"LEFT","showSpellName":true,"failedColor":[1,0,0,1],"width":250,"y":629.00012207031,"maskShape":"none","texture":"Interface\\TargetingFrame\\UI-StatusBar","font":"Friz Quadrata TT","timerFormat":"remaining","x":941.66687011719,"scale":1,"timerFontSize":12},"player":{"showTimer":true,"iconPosition":"LEFT","timerPosition":"RIGHT","castingColor":[1,0.7,0,1],"showSpark":true,"iconSize":24,"channelingColor":[0,1,0,1],"borderSize":1,"showIcon":true,"borderColor":[0,0,0,1],"anchor":"BOTTOMLEFT","showBorder":true,"backgroundColor":[0.1,0.1,0.1,0.8],"hideBlizzard":true,"enabled":true,"height":24,"nonInterruptibleColor":[0.7,0.7,0.7,1],"spellNameFontSize":12,"spellNamePosition":"LEFT","showSpellName":true,"failedColor":[1,0,0,1],"width":250,"y":424.16708374023,"maskShape":"none","texture":"Interface\\TargetingFrame\\UI-StatusBar","font":"Friz Quadrata TT","timerFormat":"remaining","x":718.83367919922,"scale":1,"timerFontSize":12},"focus":{"showTimer":true,"iconPosition":"LEFT","timerPosition":"RIGHT","castingColor":[1,0.7,0,1],"showSpark":true,"iconSize":20,"channelingColor":[0,1,0,1],"borderSize":1,"showIcon":true,"borderColor":[0,0,0,1],"anchor":"BOTTOMLEFT","showBorder":true,"backgroundColor":[0.1,0.1,0.1,0.8],"hideBlizzard":true,"enabled":true,"height":20,"nonInterruptibleColor":[0.7,0.7,0.7,1],"spellNameFontSize":11,"spellNamePosition":"LEFT","showSpellName":true,"failedColor":[1,0,0,1],"width":200,"y":632.83264160156,"maskShape":"none","texture":"Interface\\TargetingFrame\\UI-StatusBar","font":"Friz Quadrata TT","timerFormat":"remaining","x":184.66806030273,"scale":1,"timerFontSize":11}},"unitFrames":{"enabled":false},"cooldowns":{"essential":{"enabled":true},"customTrackers":{"enabled":true},"buffs":{"enabled":true},"global":{"debugMode":false},"utility":{"enabled":true}},"nameplates":{"enabled":true},"personalResources":{"enabled":true},"chat":{"enabled":true}},"exportType":"full","version":"1.7.2_beta","profileName":"Base"}]==]

-- ============================================================================
-- FIRST RUN DETECTION AND APPLICATION
-- ============================================================================

-- Apply the base profile on first run
function BaseProfile:ApplyFirstRunProfile()
    -- Check if string is placeholder
    if BASE_PROFILE_STRING == "TUIRAW:PLACEHOLDER" then
        TweaksUI:PrintDebug("Base profile not configured")
        return false, "Base profile not configured"
    end
    
    -- Check if we've already applied the base profile
    if TweaksUI_DB and TweaksUI_DB.baseProfileApplied then
        return false, "Base profile already applied"
    end
    
    -- Check if user already has profiles (not a fresh install)
    if TweaksUI_DB and TweaksUI_DB.profiles and next(TweaksUI_DB.profiles) then
        -- User already has profiles, mark as applied but don't overwrite
        TweaksUI_DB.baseProfileApplied = true
        return false, "User already has profiles"
    end
    
    -- Check if character already has settings
    if TweaksUI_CharDB and TweaksUI_CharDB.settings and next(TweaksUI_CharDB.settings) then
        -- Character already has settings, mark as applied but don't overwrite
        if TweaksUI_DB then
            TweaksUI_DB.baseProfileApplied = true
        end
        return false, "Character already has settings"
    end
    
    -- Import the base profile
    local success, message = self:ImportBaseProfile()
    
    if success then
        -- Mark as applied
        if TweaksUI_DB then
            TweaksUI_DB.baseProfileApplied = true
        end
        
        -- Save as "Base" profile
        if TweaksUI.Profiles then
            C_Timer.After(1, function()
                TweaksUI.Profiles:SaveProfile("Base")
                TweaksUI:Print("|cff00ff80TweaksUI:|r Base profile applied and saved!")
            end)
        end
    end
    
    return success, message
end

-- Import the base profile string
function BaseProfile:ImportBaseProfile()
    if not TweaksUI.Import then
        return false, "Import module not available"
    end
    
    local success, message, charKey = TweaksUI.Import:AutoImport(BASE_PROFILE_STRING, "Base")
    
    if success then
        -- Fire settings changed event to refresh all modules
        if TweaksUI.Events then
            TweaksUI.Events:Fire(TweaksUI.EVENTS.SETTINGS_CHANGED, nil, nil, nil)
        end
        
        -- Refresh all modules
        C_Timer.After(0.5, function()
            if TweaksUI.ModuleManager then
                TweaksUI.ModuleManager:RefreshAll()
            end
        end)
    end
    
    return success, message
end

-- Get the base profile string (for reference)
function BaseProfile:GetBaseProfileString()
    return BASE_PROFILE_STRING
end

-- Initialize and check for first run
function BaseProfile:Initialize()
    -- Delay to ensure all systems are ready
    C_Timer.After(2, function()
        local success, message = self:ApplyFirstRunProfile()
        if success then
            TweaksUI:PrintDebug("Base profile applied: " .. (message or "success"))
        else
            TweaksUI:PrintDebug("Base profile skipped: " .. (message or "unknown"))
        end
    end)
end
