local addonName, addonTable = ...
local addon                 = addonTable.Core

addonTable.ItemFrameDefault = {
    enable                 = false,

    -- toggles
    showWhenInactive       = false,
    desaturateWhenInactive = false,
    showCooldown           = true,

    -- overall
    scale                  = 1,

    -- position
    overridePose           = false,
    anchor                 = "CENTER",
    anchorRel              = "CENTER",
    xOffset                = 0,
    yOffset                = 0,
    parent                 = "UIParent",

    -- icon settings
    overrideIcon           = false,
    iconWidth              = 40,
    iconHeight             = 40,
    showIconOverlay        = true,
    showIconBorder         = 0,
    showDebuffBorder       = false,
    addPixelBorder         = false,
    pixelBorderSize        = 1,
    pixelBorderColor       = "FFFFFFFF",
    removeMask             = false,
    overridePandemicIcon   = false,
    pandemicGlowType       = 0,
    pandemicColor          = "FFFFFFFF",
    overrideSpellAlert     = false,
    spellAlertType         = 0,
    spellAlertColor        = "FFFFFFFF",

    -- bar settings
    overrideBar            = false,
    overrideColor          = false,
    color                  = "FFFFFF",
    classColor             = false,
    overrideTexture        = false,
    texture                = "UI-HUD-CoolDownManager-Bar",
    overrideBarSize        = false,
    barWidth               = 200,
    barHeight              = 20,
    showPip                = true,
    pipHeight              = 10,
    showBackground         = true,
    barIconSpacing         = 2,
    displayType            = 1,
    addPixelBorderBar      = false,
    pixelBorderSizeBar     = 1,
    pixelBorderColorBar    = "FFFFFFFF",
    customBackground       = false,
    backgroundColor        = "FF000000",

    -- font settings
    overrideFontSizes      = false,
    nameScale              = 12,
    cooldownScale          = 12,
    applicationScale       = 12,
    overrideFontPosition   = false,
    iconCooldownPosition   = "CENTER",
    barCooldownPosition    = "RIGHT",
    barNamePosition        = "LEFT",
    applicationPosition    = "BOTTOMRIGHT",

    -- item settings
    itemId                 = 0,
    cooldownID             = 0,
    showCharge             = true,

    rank                   = 999,
}

local defaults              = {
    profile = {
        testMode = false,
        essential = {
            enable = true,
            test = false,
            layout = {
                iconLimit              = 8,
                isHorizontal           = 0,
                growthDirection        = Enum.CooldownViewerIconDirection.Right, -- left to right, right to left, top to bottom, bottom to top
                secondDirection        = 1,
                centerDistribution     = false,
                padding                = 5,
                paddingY               = 5,
                scale                  = 1,
                countScale             = 20,
                cooldownScale          = 25,
                showCooldown           = true,
                showWhenInactive       = true,
                desaturateWhenInactive = true,
                iconWidth              = 50,
                iconHeight             = 50,
                showIconOverlay        = true,
                showIconBorder         = 0,
                addPixelBorder         = false,
                pixelBorderSize        = 1,
                pixelBorderColor       = "FFFFFFFF",
                removeMask             = false,
                overridePandemicIcon   = false,
                pandemicGlowType       = 0,
                pandemicColor          = "FFFFFFFF",
                overrideSpellAlert     = false,
                spellAlertType         = 0,
                spellAlertColor        = "FFFFFFFF",
                dynamicDisplayUpdate   = false,
                keybind                = {
                    showKeybind = false,
                    keybindPosition = "TOPRIGHT", -- 1: top-left, 2: top-right, 3: bottom-left, 4: bottom-right
                    keybindFontSize = 12,
                },
                showAssistedHighlight  = false,
                assistedHighlightStyle = 2,
                assistedHighlightColor = "FFFF00",
                iconCooldownPosition   = "CENTER",
                barCooldownPosition    = "RIGHT",
                barNamePosition        = "LEFT",
                applicationPosition    = "BOTTOMRIGHT",
            },
            anchor = {
                overridePlacement  = false,
                point              = "BOTTOM",
                relativePoint      = "BOTTOM",
                xOffset            = 0,
                yOffset            = 310,
                addOffset          = false,
                parent             = "UIParent",
                inheritsVisibility = false,
                inheritsScale      = false,
            },
            display = {
                selectedEntry = nil,
                -- Spec tables
                [250]         = {},
                [251]         = {},
                [252]         = {},
                [577]         = {},
                [581]         = {},
                [102]         = {},
                [103]         = {},
                [104]         = {},
                [105]         = {},
                [1467]        = {},
                [1468]        = {},
                [1473]        = {},
                [1480]        = {},
                [253]         = {},
                [254]         = {},
                [255]         = {},
                [62]          = {},
                [63]          = {},
                [64]          = {},
                [268]         = {},
                [270]         = {},
                [269]         = {},
                [65]          = {},
                [66]          = {},
                [70]          = {},
                [256]         = {},
                [257]         = {},
                [258]         = {},
                [259]         = {},
                [260]         = {},
                [261]         = {},
                [262]         = {},
                [263]         = {},
                [264]         = {},
                [265]         = {},
                [266]         = {},
                [267]         = {},
                [71]          = {},
                [72]          = {},
                [73]          = {},
            },
            override = {
                selectedCooldownId = nil,
                -- Spec tables
                [250]              = {},
                [251]              = {},
                [252]              = {},
                [577]              = {},
                [581]              = {},
                [102]              = {},
                [103]              = {},
                [104]              = {},
                [105]              = {},
                [1467]             = {},
                [1468]             = {},
                [1473]             = {},
                [1480]             = {},
                [253]              = {},
                [254]              = {},
                [255]              = {},
                [62]               = {},
                [63]               = {},
                [64]               = {},
                [268]              = {},
                [270]              = {},
                [269]              = {},
                [65]               = {},
                [66]               = {},
                [70]               = {},
                [256]              = {},
                [257]              = {},
                [258]              = {},
                [259]              = {},
                [260]              = {},
                [261]              = {},
                [262]              = {},
                [263]              = {},
                [264]              = {},
                [265]              = {},
                [266]              = {},
                [267]              = {},
                [71]               = {},
                [72]               = {},
                [73]               = {},
            },
        },
        utility = {
            enable = true,
            layout = {
                iconLimit              = 8,
                growthDirection        = Enum.CooldownViewerIconDirection.Right,
                secondDirection        = 1,
                centerDistribution     = false,
                padding                = 5,
                paddingY               = 5,
                scale                  = 1,
                countScale             = 12,
                cooldownScale          = 15,
                isHorizontal           = 0,
                showCooldown           = true,
                showWhenInactive       = false,
                desaturateWhenInactive = true,
                iconWidth              = 30,
                iconHeight             = 30,
                showIconOverlay        = true,
                showIconBorder         = 0,
                addPixelBorder         = false,
                pixelBorderSize        = 1,
                pixelBorderColor       = "FFFFFFFF",
                removeMask             = false,
                overridePandemicIcon   = false,
                pandemicGlowType       = 0,
                pandemicColor          = "FFFFFFFF",
                overrideSpellAlert     = false,
                spellAlertType         = 0,
                spellAlertColor        = "FFFFFFFF",
                dynamicDisplayUpdate   = false,
                keybind                = {
                    showKeybind = false,
                    keybindPosition = "TOPRIGHT", -- 1: top-left, 2: top-right, 3: bottom-left, 4: bottom-right
                    keybindFontSize = 12,
                },
                iconCooldownPosition   = "CENTER",
                barCooldownPosition    = "RIGHT",
                barNamePosition        = "LEFT",
                applicationPosition    = "BOTTOMRIGHT",
            },
            anchor = {
                overridePlacement  = false,
                point              = "BOTTOM",
                relativePoint      = "BOTTOM",
                xOffset            = 0,
                yOffset            = 240,
                addOffset          = false,
                parent             = "UIParent",
                inheritsVisibility = false,
                inheritsScale      = false,
            },
            display = {
                selectedEntry = nil,
                -- Spec tables
                [250]         = {},
                [251]         = {},
                [252]         = {},
                [577]         = {},
                [581]         = {},
                [102]         = {},
                [103]         = {},
                [104]         = {},
                [105]         = {},
                [1467]        = {},
                [1468]        = {},
                [1473]        = {},
                [1480]        = {},
                [253]         = {},
                [254]         = {},
                [255]         = {},
                [62]          = {},
                [63]          = {},
                [64]          = {},
                [268]         = {},
                [270]         = {},
                [269]         = {},
                [65]          = {},
                [66]          = {},
                [70]          = {},
                [256]         = {},
                [257]         = {},
                [258]         = {},
                [259]         = {},
                [260]         = {},
                [261]         = {},
                [262]         = {},
                [263]         = {},
                [264]         = {},
                [265]         = {},
                [266]         = {},
                [267]         = {},
                [71]          = {},
                [72]          = {},
                [73]          = {},
            },
            override = {
                selectedCooldownId = nil,
                -- Spec tables
                [250]              = {},
                [251]              = {},
                [252]              = {},
                [577]              = {},
                [581]              = {},
                [102]              = {},
                [103]              = {},
                [104]              = {},
                [105]              = {},
                [1467]             = {},
                [1468]             = {},
                [1473]             = {},
                [1480]             = {},
                [253]              = {},
                [254]              = {},
                [255]              = {},
                [62]               = {},
                [63]               = {},
                [64]               = {},
                [268]              = {},
                [270]              = {},
                [269]              = {},
                [65]               = {},
                [66]               = {},
                [70]               = {},
                [256]              = {},
                [257]              = {},
                [258]              = {},
                [259]              = {},
                [260]              = {},
                [261]              = {},
                [262]              = {},
                [263]              = {},
                [264]              = {},
                [265]              = {},
                [266]              = {},
                [267]              = {},
                [71]               = {},
                [72]               = {},
                [73]               = {},
            },
        },
        buffIcon = {
            enable = true,
            layout = {
                iconLimit              = 8,
                growthDirection        = Enum.CooldownViewerIconDirection.Right,
                secondDirection        = 1,
                centerDistribution     = false,
                padding                = 5,
                paddingY               = 5,
                scale                  = 1,
                countScale             = 15,
                cooldownScale          = 20,
                isHorizontal           = 0,
                showCooldown           = true,
                showWhenInactive       = false,
                desaturateWhenInactive = true,
                iconWidth              = 40,
                iconHeight             = 40,
                showIconOverlay        = true,
                showIconBorder         = 0,
                showDebuffBorder       = false,
                addPixelBorder         = false,
                pixelBorderSize        = 1,
                pixelBorderColor       = "FFFFFFFF",
                removeMask             = false,
                overridePandemicIcon   = false,
                pandemicGlowType       = 0,
                pandemicColor          = "FFFFFFFF",
                overrideSpellAlert     = false,
                spellAlertType         = 0,
                spellAlertColor        = "FFFFFFFF",
                dynamicDisplayUpdate   = false,
                iconCooldownPosition   = "CENTER",
                barCooldownPosition    = "RIGHT",
                barNamePosition        = "LEFT",
                applicationPosition    = "BOTTOMRIGHT",
            },
            anchor = {
                overridePlacement  = false,
                point              = "BOTTOM",
                relativePoint      = "BOTTOM",
                xOffset            = 0,
                yOffset            = 370,
                addOffset          = false,
                parent             = "UIParent",
                inheritsVisibility = false,
                inheritsScale      = false,
            },
            display = {
                selectedEntry = nil,
                -- Spec tables
                [250]         = {},
                [251]         = {},
                [252]         = {},
                [577]         = {},
                [581]         = {},
                [102]         = {},
                [103]         = {},
                [104]         = {},
                [105]         = {},
                [1467]        = {},
                [1468]        = {},
                [1473]        = {},
                [1480]        = {},
                [253]         = {},
                [254]         = {},
                [255]         = {},
                [62]          = {},
                [63]          = {},
                [64]          = {},
                [268]         = {},
                [270]         = {},
                [269]         = {},
                [65]          = {},
                [66]          = {},
                [70]          = {},
                [256]         = {},
                [257]         = {},
                [258]         = {},
                [259]         = {},
                [260]         = {},
                [261]         = {},
                [262]         = {},
                [263]         = {},
                [264]         = {},
                [265]         = {},
                [266]         = {},
                [267]         = {},
                [71]          = {},
                [72]          = {},
                [73]          = {},
            },
            override = {
                selectedCooldownId = nil,
                -- Spec tables
                [250]              = {},
                [251]              = {},
                [252]              = {},
                [577]              = {},
                [581]              = {},
                [102]              = {},
                [103]              = {},
                [104]              = {},
                [105]              = {},
                [1467]             = {},
                [1468]             = {},
                [1473]             = {},
                [1480]             = {},
                [253]              = {},
                [254]              = {},
                [255]              = {},
                [62]               = {},
                [63]               = {},
                [64]               = {},
                [268]              = {},
                [270]              = {},
                [269]              = {},
                [65]               = {},
                [66]               = {},
                [70]               = {},
                [256]              = {},
                [257]              = {},
                [258]              = {},
                [259]              = {},
                [260]              = {},
                [261]              = {},
                [262]              = {},
                [263]              = {},
                [264]              = {},
                [265]              = {},
                [266]              = {},
                [267]              = {},
                [71]               = {},
                [72]               = {},
                [73]               = {},
            },
        },
        buffBar = {
            enable = true,
            layout = {
                iconLimit              = 10,
                isHorizontal           = 1,
                growthDirection        = Enum.CooldownViewerIconDirection.Right,
                secondDirection        = 1,
                centerDistribution     = false,
                padding                = 5,
                paddingY               = 5,
                scale                  = 1,
                countScale             = 15,
                cooldownScale          = 15,
                nameScale              = 15,
                showCooldown           = true,
                showWhenInactive       = true,
                desaturateWhenInactive = true,
                iconWidth              = 30,
                iconHeight             = 30,
                barHeight              = 20,
                barWidth               = 200,
                displayType            = 0, -- 0 1 2
                showBackground         = true,
                showIconOverlay        = true,
                showIconBorder         = 0,
                showDebuffBorder       = false,
                addPixelBorder         = false,
                pixelBorderSize        = 1,
                pixelBorderColor       = "FFFFFFFF",
                removeMask             = false,
                overridePandemicIcon   = false,
                pandemicGlowType       = 0,
                pandemicColor          = "FFFFFFFF",
                overrideSpellAlert     = false,
                spellAlertType         = 0,
                spellAlertColor        = "FFFFFFFF",
                barColorOverride       = false,
                barColor               = "FFFFFFFF",
                classColor             = false,
                barTextureOverride     = false,
                barTexture             = "UI-HUD-CoolDownManager-Bar",
                barIconSpacing         = 0,
                showPip                = true,
                pipHeight              = 46,
                addPixelBorderBar      = false,
                pixelBorderSizeBar     = 1,
                pixelBorderColorBar    = "FFFFFFFF",
                customBackground       = false,
                backgroundColor        = "FF000000",
                dynamicDisplayUpdate   = false,
                iconCooldownPosition   = "CENTER",
                barCooldownPosition    = "RIGHT",
                barNamePosition        = "LEFT",
                applicationPosition    = "BOTTOMRIGHT",
            },
            anchor = {
                overridePlacement  = false,
                point              = "BOTTOM",
                relativePoint      = "BOTTOM",
                xOffset            = 420,
                yOffset            = 430,
                addOffset          = false,
                parent             = "UIParent",
                inheritsVisibility = false,
                inheritsScale      = false,
            },
            display = {
                selectedEntry = nil,
                -- Spec tables
                [250]         = {},
                [251]         = {},
                [252]         = {},
                [577]         = {},
                [581]         = {},
                [102]         = {},
                [103]         = {},
                [104]         = {},
                [105]         = {},
                [1467]        = {},
                [1468]        = {},
                [1473]        = {},
                [1480]        = {},
                [253]         = {},
                [254]         = {},
                [255]         = {},
                [62]          = {},
                [63]          = {},
                [64]          = {},
                [268]         = {},
                [270]         = {},
                [269]         = {},
                [65]          = {},
                [66]          = {},
                [70]          = {},
                [256]         = {},
                [257]         = {},
                [258]         = {},
                [259]         = {},
                [260]         = {},
                [261]         = {},
                [262]         = {},
                [263]         = {},
                [264]         = {},
                [265]         = {},
                [266]         = {},
                [267]         = {},
                [71]          = {},
                [72]          = {},
                [73]          = {},
            },
            override = {
                selectedCooldownId = nil,
                -- Spec tables
                [250]              = {},
                [251]              = {},
                [252]              = {},
                [577]              = {},
                [581]              = {},
                [102]              = {},
                [103]              = {},
                [104]              = {},
                [105]              = {},
                [1467]             = {},
                [1468]             = {},
                [1473]             = {},
                [1480]             = {},
                [253]              = {},
                [254]              = {},
                [255]              = {},
                [62]               = {},
                [63]               = {},
                [64]               = {},
                [268]              = {},
                [270]              = {},
                [269]              = {},
                [65]               = {},
                [66]               = {},
                [70]               = {},
                [256]              = {},
                [257]              = {},
                [258]              = {},
                [259]              = {},
                [260]              = {},
                [261]              = {},
                [262]              = {},
                [263]              = {},
                [264]              = {},
                [265]              = {},
                [266]              = {},
                [267]              = {},
                [71]               = {},
                [72]               = {},
                [73]               = {},
            },
        },
    },
    global = {
        playerClass      = nil,
        playerSpec       = nil,
        cooldownIDsCache = {},
        spellIDCache     = {},
    },
}

function addon:LoadData()
    self.db = LibStub("AceDB-3.0"):New("CooldownManagerControlDB", defaults, true)
    --self.db:ResetProfile()
    addon.db.profile.essential.override.selectedCooldownId = nil
    addon.db.profile.utility.override.selectedCooldownId = nil
    addon.db.profile.buffIcon.override.selectedCooldownId = nil
    addon.db.profile.buffBar.override.selectedCooldownId = nil

    addon.db.profile.essential.display.selectedEntry = nil
    addon.db.profile.utility.display.selectedEntry = nil
    addon.db.profile.buffIcon.display.selectedEntry = nil
    addon.db.profile.buffBar.display.selectedEntry = nil

    -- testMode to false
    addon.db.profile.testMode = false

    --print("Cooldown Manager Control DB version:", CooldownManagerControlDB.version)

    if not CooldownManagerControlDB.version or CooldownManagerControlDB.version < 12.0 then
        self.db:ResetDB("Default")
        CooldownManagerControlDB.version = 12.0
    end
end
